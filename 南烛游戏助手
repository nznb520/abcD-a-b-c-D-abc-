local player = game:GetService("Players").LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "NZScriptCenterPro"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- 主框架
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0.35, 0, 0.45, 0)
mainFrame.Position = UDim2.new(0.325, 0, 0.275, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
mainFrame.BackgroundTransparency = 0.2
mainFrame.BorderSizePixel = 0
mainFrame.Parent = gui

-- 高级边框效果
local borderGlow = Instance.new("ImageLabel")
borderGlow.Name = "BorderGlow"
borderGlow.Size = UDim2.new(1, 12, 1, 12)
borderGlow.Position = UDim2.new(0, -6, 0, -6)
borderGlow.BackgroundTransparency = 1
borderGlow.Image = "rbxassetid://8996079555"
borderGlow.ImageColor3 = Color3.fromRGB(0, 150, 255)
borderGlow.ScaleType = Enum.ScaleType.Slice
borderGlow.SliceCenter = Rect.new(100, 100, 100, 100)
borderGlow.SliceScale = 0.5
borderGlow.Parent = mainFrame

-- 边框动画
coroutine.wrap(function()
    while true do
        for hue = 0, 1, 0.01 do
            borderGlow.ImageColor3 = Color3.fromHSV(hue, 0.8, 1)
            borderGlow.ImageTransparency = 0.3 + 0.2 * math.sin(hue * math.pi * 2)
            wait(0.05)
        end
    end
end)()

-- 标题栏
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0.12, 0)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
titleBar.BackgroundTransparency = 0.3
titleBar.BorderSizePixel = 0
titleBar.Parent = mainFrame

-- 标题文本
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(0.6, 0, 1, 0)
title.Position = UDim2.new(0.2, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "NZ脚本中心 PRO"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextStrokeTransparency = 0.7
title.Parent = titleBar

-- 标题动画
coroutine.wrap(function()
    while true do
        title.TextStrokeColor3 = Color3.fromHSV(tick()%5/5, 1, 1)
        title.TextColor3 = Color3.fromHSV(tick()%5/5, 0.5, 1)
        wait(0.1)
    end
end)()

-- 控制按钮
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0.1, 0, 1, 0)
closeButton.Position = UDim2.new(0.9, 0, 0, 0)
closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
closeButton.BackgroundTransparency = 0.5
closeButton.BorderSizePixel = 0
closeButton.Text = "✕"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 18
closeButton.Parent = titleBar

local minimizeButton = Instance.new("TextButton")
minimizeButton.Name = "MinimizeButton"
minimizeButton.Size = UDim2.new(0.1, 0, 1, 0)
minimizeButton.Position = UDim2.new(0.8, 0, 0, 0)
minimizeButton.BackgroundColor3 = Color3.fromRGB(50, 50, 200)
minimizeButton.BackgroundTransparency = 0.5
minimizeButton.BorderSizePixel = 0
minimizeButton.Text = "─"
minimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeButton.Font = Enum.Font.GothamBold
minimizeButton.TextSize = 18
minimizeButton.Parent = titleBar

local resizeButton = Instance.new("TextButton")
resizeButton.Name = "ResizeButton"
resizeButton.Size = UDim2.new(0.1, 0, 1, 0)
resizeButton.Position = UDim2.new(0.7, 0, 0, 0)
resizeButton.BackgroundColor3 = Color3.fromRGB(50, 200, 50)
resizeButton.BackgroundTransparency = 0.5
resizeButton.BorderSizePixel = 0
resizeButton.Text = "↔"
resizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
resizeButton.Font = Enum.Font.GothamBold
resizeButton.TextSize = 18
resizeButton.Parent = titleBar

-- 按钮悬停效果
local function setupButtonHover(button)
    button.MouseEnter:Connect(function()
        button.BackgroundTransparency = 0.2
    end)
    button.MouseLeave:Connect(function()
        button.BackgroundTransparency = 0.5
    end)
end

setupButtonHover(closeButton)
setupButtonHover(minimizeButton)
setupButtonHover(resizeButton)

-- 内容区域
local contentFrame = Instance.new("ScrollingFrame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, 0, 0.88, 0)
contentFrame.Position = UDim2.new(0, 0, 0.12, 0)
contentFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
contentFrame.BackgroundTransparency = 0.3
contentFrame.BorderSizePixel = 0
contentFrame.ScrollBarThickness = 8
contentFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 255)
contentFrame.CanvasSize = UDim2.new(0, 0, 2, 0)
contentFrame.Parent = mainFrame

-- 类别按钮
local categories = {"通用", "移动", "视觉", "工具", "娱乐", "高级"}
local categoryButtons = {}

for i, category in ipairs(categories) do
    local button = Instance.new("TextButton")
    button.Name = category .. "Button"
    button.Size = UDim2.new(0.15, 0, 0.08, 0)
    button.Position = UDim2.new(0.03 + (i-1)*0.16, 0, 0.03, 0)
    button.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    button.BackgroundTransparency = 0.4
    button.BorderSizePixel = 0
    button.Text = category
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.Font = Enum.Font.Gotham
    button.TextSize = 14
    button.Parent = contentFrame
    
    button.MouseEnter:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
    end)
    button.MouseLeave:Connect(function()
        button.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    end)
    
    categoryButtons[category] = button
end

-- 通用功能区域
local generalFrame = Instance.new("Frame")
generalFrame.Name = "GeneralFrame"
generalFrame.Size = UDim2.new(0.94, 0, 1.5, 0)
generalFrame.Position = UDim2.new(0.03, 0, 0.12, 0)
generalFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
generalFrame.BackgroundTransparency = 0.4
generalFrame.BorderSizePixel = 0
generalFrame.Visible = true
generalFrame.Parent = contentFrame

-- 功能组标题
local function createSectionTitle(text, yPosition)
    local title = Instance.new("TextLabel")
    title.Name = text .. "Title"
    title.Size = UDim2.new(0.9, 0, 0.07, 0)
    title.Position = UDim2.new(0.05, 0, yPosition, 0)
    title.BackgroundTransparency = 1
    title.Text = text
    title.TextColor3 = Color3.fromRGB(200, 200, 255)
    title.Font = Enum.Font.GothamBold
    title.TextSize = 16
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = generalFrame
    return title
end

-- 旋转功能组
createSectionTitle("旋转功能", 0.05)

-- 快速旋转按钮
local fastSpinButton = Instance.new("TextButton")
fastSpinButton.Name = "FastSpinButton"
fastSpinButton.Size = UDim2.new(0.9, 0, 0.1, 0)
fastSpinButton.Position = UDim2.new(0.05, 0, 0.13, 0)
fastSpinButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
fastSpinButton.BackgroundTransparency = 0.4
fastSpinButton.BorderSizePixel = 0
fastSpinButton.Text = "快速旋转 (速度25)"
fastSpinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
fastSpinButton.Font = Enum.Font.Gotham
fastSpinButton.TextSize = 14
fastSpinButton.Parent = generalFrame

-- 极速旋转按钮
local turboSpinButton = Instance.new("TextButton")
turboSpinButton.Name = "TurboSpinButton"
turboSpinButton.Size = UDim2.new(0.9, 0, 0.1, 0)
turboSpinButton.Position = UDim2.new(0.05, 0, 0.25, 0)
turboSpinButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
turboSpinButton.BackgroundTransparency = 0.4
turboSpinButton.BorderSizePixel = 0
turboSpinButton.Text = "极速旋转 (速度50)"
turboSpinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
turboSpinButton.Font = Enum.Font.Gotham
turboSpinButton.TextSize = 14
turboSpinButton.Parent = generalFrame

-- 旋转功能实现
local spinning = false
local spinSpeed = 0

local function spinCharacter()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    
    while spinning do
        humanoid.CameraOffset = Vector3.new(0, 0, 0)
        humanoid.CameraOffset = Vector3.new(0, 0, 0)
        humanoid.CameraOffset = Vector3.new(0, 0, 0)
        humanoid.CameraOffset = Vector3.new(0, 0, 0)
        wait()
    end
end

fastSpinButton.MouseButton1Click:Connect(function()
    spinning = not spinning
    spinSpeed = 25
    if spinning then
        fastSpinButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        turboSpinButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        coroutine.wrap(spinCharacter)()
    else
        fastSpinButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
    end
end)

turboSpinButton.MouseButton1Click:Connect(function()
    spinning = not spinning
    spinSpeed = 50
    if spinning then
        turboSpinButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        fastSpinButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        coroutine.wrap(spinCharacter)()
    else
        turboSpinButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
    end
end)

-- 跳跃功能组
createSectionTitle("跳跃功能", 0.37)

-- 无限跳跃按钮
local infiniteJumpButton = Instance.new("TextButton")
infiniteJumpButton.Name = "InfiniteJumpButton"
infiniteJumpButton.Size = UDim2.new(0.6, 0, 0.1, 0)
infiniteJumpButton.Position = UDim2.new(0.05, 0, 0.45, 0)
infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
infiniteJumpButton.BackgroundTransparency = 0.4
infiniteJumpButton.BorderSizePixel = 0
infiniteJumpButton.Text = "无限跳跃"
infiniteJumpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
infiniteJumpButton.Font = Enum.Font.Gotham
infiniteJumpButton.TextSize = 14
infiniteJumpButton.Parent = generalFrame

-- 无限跳跃开关按钮
local infiniteJumpToggle = Instance.new("TextButton")
infiniteJumpToggle.Name = "InfiniteJumpToggle"
infiniteJumpToggle.Size = UDim2.new(0.25, 0, 0.1, 0)
infiniteJumpToggle.Position = UDim2.new(0.7, 0, 0.45, 0)
infiniteJumpToggle.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
infiniteJumpToggle.BackgroundTransparency = 0.4
infiniteJumpToggle.BorderSizePixel = 0
infiniteJumpToggle.Text = "OFF"
infiniteJumpToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
infiniteJumpToggle.Font = Enum.Font.GothamBold
infiniteJumpToggle.TextSize = 14
infiniteJumpToggle.Parent = generalFrame

-- 超级跳跃按钮
local superJumpButton = Instance.new("TextButton")
superJumpButton.Name = "SuperJumpButton"
superJumpButton.Size = UDim2.new(0.9, 0, 0.1, 0)
superJumpButton.Position = UDim2.new(0.05, 0, 0.57, 0)
superJumpButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
superJumpButton.BackgroundTransparency = 0.4
superJumpButton.BorderSizePixel = 0
superJumpButton.Text = "超级跳跃 (高度100)"
superJumpButton.TextColor3 = Color3.fromRGB(255, 255, 255)
superJumpButton.Font = Enum.Font.Gotham
superJumpButton.TextSize = 14
superJumpButton.Parent = generalFrame

-- 跳跃功能实现
local infiniteJumpEnabled = false
local superJumpEnabled = false
local originalJumpPower

local function updateToggleState()
    if infiniteJumpEnabled then
        infiniteJumpToggle.Text = "ON"
        infiniteJumpToggle.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    else
        infiniteJumpToggle.Text = "OFF"
        infiniteJumpToggle.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
    end
end

local function enableInfiniteJump()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    
    originalJumpPower = humanoid.JumpPower
    
    humanoid.JumpPower = 50
    humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
    
    game:GetService("UserInputService").JumpRequest:Connect(function()
        if infiniteJumpEnabled then
        humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
        end
    end)
end

local function enableSuperJump()
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    humanoid.JumpPower = 100
end

local function disableJumpModifications()
    if originalJumpPower then
        local character = player.Character or player.CharacterAdded:Wait()
        local humanoid = character:WaitForChild("Humanoid")
        humanoid.JumpPower = originalJumpPower
    end
end

infiniteJumpButton.MouseButton1Click:Connect(function()
    infiniteJumpEnabled = not infiniteJumpEnabled
    superJumpEnabled = false
    
    if infiniteJumpEnabled then
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        superJumpButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        enableInfiniteJump()
    else
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        disableJumpModifications()
    end
    updateToggleState()
end)

infiniteJumpToggle.MouseButton1Click:Connect(function()
    infiniteJumpEnabled = not infiniteJumpEnabled
    superJumpEnabled = false
    
    if infiniteJumpEnabled then
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        superJumpButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        enableInfiniteJump()
    else
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        disableJumpModifications()
    end
    updateToggleState()
end)

superJumpButton.MouseButton1Click:Connect(function()
    superJumpEnabled = not superJumpEnabled
    infiniteJumpEnabled = false
    
    if superJumpEnabled then
        superJumpButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        infiniteJumpButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        infiniteJumpToggle.Text = "OFF"
        infiniteJumpToggle.BackgroundColor3 = Color3.fromRGB(120, 120, 120)
        enableSuperJump()
    else
        superJumpButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        disableJumpModifications()
    end
end)

-- 视觉功能组
createSectionTitle("视觉特效", 0.69)

-- 夜视模式按钮
local nightVisionButton = Instance.new("TextButton")
nightVisionButton.Name = "NightVisionButton"
nightVisionButton.Size = UDim2.new(0.9, 0, 0.1, 0)
nightVisionButton.Position = UDim2.new(0.05, 0, 0.77, 0)
nightVisionButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
nightVisionButton.BackgroundTransparency = 0.4
nightVisionButton.BorderSizePixel = 0
nightVisionButton.Text = "夜视模式"
nightVisionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
nightVisionButton.Font = Enum.Font.Gotham
nightVisionButton.TextSize = 14
nightVisionButton.Parent = generalFrame

-- X光透视按钮
local xrayButton = Instance.new("TextButton")
xrayButton.Name = "XrayButton"
xrayButton.Size = UDim2.new(0.9, 0, 0.1, 0)
xrayButton.Position = UDim2.new(0.05, 0, 0.89, 0)
xrayButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
xrayButton.BackgroundTransparency = 0.4
xrayButton.BorderSizePixel = 0
xrayButton.Text = "X光透视"
xrayButton.TextColor3 = Color3.fromRGB(255, 255, 255)
xrayButton.Font = Enum.Font.Gotham
xrayButton.TextSize = 14
xrayButton.Parent = generalFrame

-- 视觉功能实现
local nightVisionEnabled = false
local xrayEnabled = false

local function enableNightVision()
    local lighting = game:GetService("Lighting")
    lighting.Ambient = Color3.fromRGB(0, 255, 0)
    lighting.Brightness = 2
    lighting.OutdoorAmbient = Color3.fromRGB(0, 100, 0)
end

local function enableXray()
    local character = player.Character or player.CharacterAdded:Wait()
    for _, part in ipairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.LocalTransparencyModifier = 0.5
        end
    end
end

local function disableVisualEffects()
    local lighting = game:GetService("Lighting")
    lighting.Ambient = Color3.fromRGB(0.5, 0.5, 0.5)
    lighting.Brightness = 1
    lighting.OutdoorAmbient = Color3.fromRGB(0.5, 0.5, 0.5)
    
    local character = player.Character
    if character then
        for _, part in ipairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.LocalTransparencyModifier = 0
            end
        end
    end
end

nightVisionButton.MouseButton1Click:Connect(function()
    nightVisionEnabled = not nightVisionEnabled
    xrayEnabled = false
    
    if nightVisionEnabled then
        nightVisionButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        xrayButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        enableNightVision()
    else
        nightVisionButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        disableVisualEffects()
    end
end)

xrayButton.MouseButton1Click:Connect(function()
    xrayEnabled = not xrayEnabled
    nightVisionEnabled = false
    
    if xrayEnabled then
        xrayButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        nightVisionButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        enableXray()
    else
        xrayButton.BackgroundColor3 = Color3.fromRGB(80, 80, 120)
        disableVisualEffects()
    end
end)

-- 按钮功能实现
closeButton.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

local minimized = false
local minimizedButton = nil

minimizeButton.MouseButton1Click:Connect(function()
    if not minimized then
        mainFrame.Visible = false
        minimizedButton = Instance.new("TextButton")
        minimizedButton.Name = "MinimizedButton"
        minimizedButton.Size = UDim2.new(0.1, 0, 0.05, 0)
        minimizedButton.Position = UDim2.new(0.9, 0, 0, 0)
        minimizedButton.BackgroundColor3 = Color3.fromRGB(50, 50, 200)
        minimizedButton.BackgroundTransparency = 0.5
        minimizedButton.BorderSizePixel = 0
        minimizedButton.Text = "展开"
        minimizedButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        minimizedButton.Font = Enum.Font.GothamBold
        minimizedButton.TextSize = 14
        minimizedButton.Parent = gui
        
        minimizedButton.MouseButton1Click:Connect(function()
            mainFrame.Visible = true
            minimizedButton:Destroy()
            minimized = false
        end)
        
        minimized = true
    end
end)

local resizing = false
local startSize = nil
local startPos = nil

resizeButton.MouseButton1Down:Connect(function()
    resizing = true
    startSize = mainFrame.Size
    startPos = mainFrame.Position
end)

resizeButton.MouseButton1Up:Connect(function()
    resizing = false
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if resizing and input.UserInputType == Enum.UserInputType.MouseMovement then
        local mouse = game:GetService("Players").LocalPlayer:GetMouse()
        local delta = Vector2.new(mouse.X, mouse.Y) - Vector2.new(startPos.X.Offset, startPos.Y.Offset)
        mainFrame.Size = UDim2.new(startSize.X.Scale, startSize.X.Offset + delta.X, 
                                  startSize.Y.Scale, startSize.Y.Offset + delta.Y)
    end
end)

-- 使窗口可拖动
local dragging = false
local dragStart = nil
local startPos = nil

titleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

titleBar.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, 
                                     startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- 状态保存
local function saveSettings()
    local settings = {
        windowSize = mainFrame.Size,
        windowPosition = mainFrame.Position,
        infiniteJumpEnabled = infiniteJumpEnabled,
        superJumpEnabled = superJumpEnabled,
        nightVisionEnabled = nightVisionEnabled,
        xrayEnabled = xrayEnabled,
        spinning = spinning,
        spinSpeed = spinSpeed
    }
    -- 这里可以添加将settings保存到玩家数据的代码
end

-- 状态加载
local function loadSettings()
    -- 这里可以添加从玩家数据加载设置的代码
    -- 示例: mainFrame.Size = savedSettings.windowSize
end

-- 初始化加载设置
loadSettings()
